<!doctype html>
<html lang="en">
	<head>
		<title>Blog CI - ralismark</title>

<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<meta charset="utf-8">
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" href="/posts/blog-ci">
<meta name="description" content="Using github CI to deploy to github pages.">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/logo-32.png">

<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="ralismark" />

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/assets/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">

<!-- experiment: indieweb -->
<link rel="webmention" href="https://webmention.io/www.ralismark.xyz/webmention" />
<link rel="pingback" href="https://webmention.io/www.ralismark.xyz/xmlrpc" />

	</head>
	<body>
		<header id="site-nav" class="full-width text-inverted">
	<nav class="content-width flex-distribute">
		<a id="navbar-root" href="/">ralismark</a>

		

		<ul id="navbar-pages" class="list-inline my-0">
			
			
			
			
			
			
			
			
			
			
			<li class="navbar-page">
				<a class="navbar-link" href="/posts">
					Blog
				</a>
			</li>
			
			
			
			
			
			
			
			
			
			
		</ul>
	</nav>
</header>


		<main class="content-width my-2 h-entry">
			<nav class="post-nav flex-distribute my-1">
	
		<a class="prev" href="/posts/blog-style">&laquo; Blog Post Style</a>
	

	
		<a class="next" href="/posts/keyboard">Wacky Keyboard Mods &raquo;</a>
	
</nav>


<header class="post-meta fenced-b mb-1 text-centre bleed">
	<h1 id="post-title" class="p-name">Blog CI</h1>
	<p class="p-summary"><em>
		Using github CI to deploy to github pages.
	</em></p>
	<ul class="li-flat">
		<li>
		<time datetime="2020-10-28T00:00:00-05:00" class="dt-published">
			<a class="u-url" href="/posts/blog-ci">
			28 October 2020
			</a>
		</time>
		</li>

		<li>
			
			<abbr title="191 total words">1 min to read</abbr>
		</li>

		
		
		<li id="post-tags">
			<span id="post-tag-label">Tags:</span>
			
				<a class="p-category badge" href="/tags#blog">blog</a>
			
		</li>
		
	</p>
</header>

<article class="post-content e-content bounded">
	<p>While I’ve tried to keep this blog as static as possible, I’ve struggled with the limitations of github-pages for many features that I wanted to use.</p>

<!--more-->

<ul>
  <li>Biggest of all, you can’t render <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.89883em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span style="top:-2.904999em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.46782999999999997em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">&#x200b;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> in jekyll and must include KaTeX or MathJax to render it client-side.</li>
  <li>Turning sections headings into links requires either doing it client-side or <a href="https://github.com/allejo/jekyll-anchor-headings">parsing html with the Liquid templating system</a>.</li>
  <li>Including GraphViz graphs (or other rendered diagrams) requires either generating them by hand, or automating it using a Makefile. Either way, you need to re-render the graphics by hand when you make changes.</li>
</ul>

<p>Switching to github actions to build significantly relaxes these constraints. <a href="https://github.com/ralismark/ralismark.github.io/blob/d3ece19d62ed269817d3fcd397886e7f7c137547/.github/workflows/deploy.yml">My current setup</a> involves spinning up a docker container and building the site there – so I can test locally – then automatically pushing to the <code class="language-plaintext highlighter-rouge">gh-pages</code> branch. It still uses Jekyll as the static site generator, so migration was quite painless.</p>

<p>With the full power of Jekyll, you can render <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>LaTeX</mtext></mrow><annotation encoding="application/x-tex">\LaTeX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.89883em;vertical-align:-0.2155em;"></span><span class="mord text"><span class="mord textrm">L</span><span class="mspace" style="margin-right:-0.36em;"></span><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.68333em;"><span style="top:-2.904999em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord"><span class="mord textrm mtight sizing reset-size6 size3">A</span></span></span></span></span></span><span class="mspace" style="margin-right:-0.15em;"></span><span class="mord text"><span class="mord textrm">T</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.46782999999999997em;"><span style="top:-2.7845em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord textrm">E</span></span></span></span><span class="vlist-s">&#x200b;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2155em;"><span></span></span></span></span><span class="mspace" style="margin-right:-0.125em;"></span><span class="mord textrm">X</span></span></span></span></span></span> server-side by switching kramdown’s math engine to <a href="https://github.com/kramdown/math-sskatex">sskatex</a>. You can also write plugins in the <code class="language-plaintext highlighter-rouge">_plugins</code> folder e.g. to <a href="https://github.com/ralismark/ralismark.github.io/blob/d3ece19d62ed269817d3fcd397886e7f7c137547/_plugins/graphviz.rb">run graphviz</a> or <a href="https://github.com/ralismark/ralismark.github.io/blob/d3ece19d62ed269817d3fcd397886e7f7c137547/_plugins/markdown-header.rb">add anchor tags to headers</a> – check Jekyll’s docs for more.</p>


</article>

<nav class="post-nav flex-distribute my-1">
	
		<a class="prev" href="/posts/blog-style">&laquo; Blog Post Style</a>
	

	
		<a class="next" href="/posts/keyboard">Wacky Keyboard Mods &raquo;</a>
	
</nav>


		</main>

		<div id="site-footer" class="content-width text-centre">
		<ul class="li-flat mt-0">
			<li><a href="/everything">everything</a></li>
			<li><a href="/booklist">reading list</a></li>
		</ul>
		All work licensed under <b>CC BY-SA 4.0</b> unless otherwise stated.
		<br>
		This site is <a href="https://github.com/ralismark/ralismark.github.io">open source</a>!
</div>

	</body>
</html>
